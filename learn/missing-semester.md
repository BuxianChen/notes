# CS课程中缺失的一课

## 第3课: VIM

备注：<font color=red>按键严格区分大小写</font>

### vim 的编辑模式

主要操作模式为：

- 正常模式：在文件中四处移动光标进行修改的模式。进入vim时处于的模式
- 插入模式：插入文本
- 替换模式：替换文本
- 可视化模式：进一步分为一般、行、块模式，主要是移动光标选中一大块文本
- 命令模式：用于执行命令

#### 模式的切换方式

以正常模式为“中心模式”，使用 `<ESC>` 键从任何其他模式返回正常模式。在正常模式下：使用 `i` 键进入插入模式，使用 `R` 键进入替换模式，使用 `:` 键进入命令模式，使用 `v` 键进入可视化（一般）模式，使用 `V` 键进入可视化（行）模式，使用 `Ctrl+v` 进入可视化（块）模式。

### vim 界面：缓存，标签页，窗口

> Vim 会维护一系列打开的文件，称为“缓存”。一个 Vim 会话包含一系列标签页，每个标签页包含 一系列窗口（分隔面板）。每个窗口显示一个缓存。跟网页浏览器等其他你熟悉的程序不一样的是， 缓存和窗口不是一一对应的关系；窗口只是视角。一个缓存可以在_多个_窗口打开，甚至在同一 个标签页内的多个窗口打开。这个功能其实很好用，比如在查看同一个文件的不同部分的时候。
>
> Vim 默认打开一个标签页，这个标签也包含一个窗口

### 各模式下的基础操作

#### 正常模式

正常模式下，光标的显示方式为块状。

第一类操作为**移动**，也被称为**名词**。

- 使用 `hjkl` 分别代表左、下、上、右移动光标，当然也可以使用方向键；
- 词：`w` 表示移动到下一个词首，`b` 表示移动到当前词的词首，`e` 表示移动到当前词的词尾；
  - 备注（不重要的细节）：如果当前光标停在词尾，那么 `e` 键将会移动到下一个词的词尾；`b` 键同理。
- 行：`0` （数字零）表示移动到行首，`^` 键移动到该行第一个非空格位置，`$` 键移动改行的行尾；
- 屏幕：`H` 表示屏幕首行，`M` 表示屏幕中间，`L` 表示屏幕底部；
- 翻页：`Ctrl+u` 表示上翻一页，`Ctrl+d` 表示下翻一页；
- 文件：`gg` 表示移动到文件开头，`G` 表示移动到文件结尾；
- 行数：`{数字}G` 表示移动到某一行，例如：`10G` 表示移动到文件的第10行

以下三个操作暂时不明白，先摘录

- Misc: `%` (corresponding item)
- Find: `f{character}`, `t{character}`, `F{character}`, `T{character}`
  - find/to forward/backward {character} on the current line
  - `,` or `;` for navigating matches
- Search: `/{regex}`, `n` or `N` for navigating matches

#### 插入模式

插入模式下，光标的显示方式为块状。键入字符表示在光标停留位置增加一个字符，而原始光标处及该行之后的字符往后移动一位，且新光标位置也向后移动一位。

例子：

```
abcd
```

假定当前光标位置在 c 处，键入 `f`，那么会变为

```
abfcd
```

且光标位置依然在 c 处。

#### 替换模式

插入模式下，光标的显示方式为块状。键入字符表示将光标停留位置做字符替换，新光标位置向后移动一位。

例子：

```
abcd
```

假定当前光标位置在 c 处，键入 `f`，那么会变为

```
abfd
```

且光标位置移动至 d 处。

#### 命令模式

- `:w` 表示保存
- `:q` 表示退出（前提是所有更改都已经保存了），`:q!` 表示不保存（不保存从上一次保存之后的更新）退出
- `:wq` 表示保存并退出
- `:e!` 表示放弃从上一次保存之后的更新

#### 可视化模式

待补充